<%# app/views/gigs/show.html.erb %>
<div class="gig-show-page-content-wrapper"> <%# New wrapper for centering all content %>
  <%# Gig Header Section %>
  <div class="gig-header main-content-card mb-4"> <%# Applied main-content-card here %>
    <div class="gig-header-text">
      <% venue = Venue.find(@gig.venue_id) %>
      <h1><%= venue.name %></h1>
      <p class="neighborhood"><span><%= venue.neighborhood %></span>, Tokyo </p>
    </div>
    <div class="header-header-img">
      <%= image_tag ("venue_image.jpg"), class: "gig-img" %>
    </div>
  </div>
  <%# Venue Details Toggle Section (reusing venue-details class from venue show) %>
  <div class="main-content-card mb-4"> <%# Applied main-content-card here %>
    <p class="mb-0">
      <a class="btn venue-details-collapse-btn" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
        + See Venue Details
      </a>
    </p>
    <div class="collapse mt-3" id="collapseExample">
      <div class="venue-details"> <%# Reusing venue-details class %>
        <%# Removed inline style="color: white;" here %>
        <table>
          <tr>
            <td class="label">
              <div>address:</div>
            </td>
            <td>
              <div><%= venue.address %></div>
            </td>
          </tr>
          <tr>
            <td class="label">
              <div>website:</div>
            </td>
            <td>
              <div><a href="<%= venue.website %>" target="_blank" class="venue-link"><%= venue.website %></a></div>
            </td>
          </tr>
          <tr>
            <td class="label">
              <div>email:</div>
            </td>
            <td>
              <div><a href="mailto:<%= venue.email %>" class="venue-link"><%= venue.email %></a></div>
            </td>
          </tr>
        </table>
      </div>
    </div>
  </div>
  <%# Gig Info Section %>
  <div class="gig-body main-content-card mb-4"> <%# Applied main-content-card here %>
    <h5 class="body-header my-3"><%= @gig.date.strftime("%B %d, %Y") %></h5>
    <div class="gig-times"> <%# New wrapper for times %>
      <p>OPEN: <%= @gig.open_time.to_datetime.strftime("%-k:%M") %></p>
      <p>START: <%= @gig.start_time.to_datetime.strftime("%-k:%M") %></p>
    </div>
    <p class="gig-price">PRICE: Â¥<%= @gig.price %></p>
    <p class="gig-genre">GENRE: <%= @gig.bands.first.genre %></p>
 <%# Added gig-genre class %>
    <div class="artist">
      <h6 class="artist-header mt-3 mb-2">Artists:</h6>
 <%# New header for artists %>
      <ul class="ps-0 list-unstyled"> <%# Removed ps-0, added list-unstyled %>
        <% @gig.bands.each do |band| %>
          <li class="band-info mb-2"> <%# Added mb-2 for spacing between bands %>
            <div class="band-info-text">
              <p class="band-name"><%= band.name %></p>
              <% if band.website_link.present? %>
                <p class="band-website"><a href="<%= band.website_link %>" target="_blank" class="venue-link">Website</a></p>
              <% end %>
            </div>
          </li>
        <% end %>
      </ul>
    </div>
    <div class="gig-actions mt-4">
      <% if user_signed_in? %>
        <%# Check if the current user has favorited this gig %>
        <% if current_user.favorited?(@gig) %>
          <%# If already favorited, show an Unfavorite button %>
          <%= link_to "Unfavorite", gig_favorite_path(@gig, current_user.favorites.find_by(favoritable: @gig).id),
      data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to unfavorite this gig?" },
      class: "btn gig-unfavorite-btn" %> <%# Updated class %>
        <% else %>
          <%# If not favorited, show a Favorite button %>
          <%= link_to "Favorite", gig_favorites_path(@gig),
            data: { turbo_method: :post },
            class: "btn gig-favorite-btn" %> <%# Updated class %>
        <% end %>
      <% else %>
        <%# If not signed in, prompt them to log in %>
        <p class="login-prompt text-center"><%= link_to "Log in to favorite this gig", new_user_session_path, class: "venue-link" %></p>
 <%# Added classes %>
      <% end %>
    </div>
    <hr class="my-4"> <%# Added margin for hr %>
    <div class="text-center"> <%# Centered back button %>
      <%= link_to "Back to Gigs", gigs_path, class: "btn gig-back-btn" %> <%# Added gig-back-btn class %>
    </div>
  </div>
</div>
 <%# End of .gig-show-page-content-wrapper %>
